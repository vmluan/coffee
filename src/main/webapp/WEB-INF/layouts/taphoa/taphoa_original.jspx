<html xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:tiles="http://tiles.apache.org/tags-tiles"
	xmlns:spring="http://www.springframework.org/tags">

<jsp:output doctype-root-element="HTML"
	doctype-system="about:legacy-compat"></jsp:output>

<jsp:directive.page contentType="text/html;charset=UTF-8"></jsp:directive.page>
<jsp:directive.page pageEncoding="UTF-8"></jsp:directive.page>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />

<title>QL Tap hoa</title>
<spring:url value="/resources/scripts" var="script" />
<spring:url value="/resources/styles/" var="styles" />

<link rel="shortcut icon"
	href="${pageContext.request.contextPath}/styles/home/images/icon.ico" />

<!-- Bootstrap core CSS -->
<link href="/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

<!-- Custom styles for this template -->
<link href="/resources/taphoa.css" rel="stylesheet" />
<link href="dashboard.css" rel="stylesheet"/>



</head>
<body>

	<div id="main">
		<tiles:insertAttribute name="header" ignore="true" />
		<div class="container">

    <div class="container-fluid">
      <div class="row">
        
		

		   
        <div class="test">
          <div class="page-header">
		 
					<div class="col-xs-6 col-sm-3" style="margin-left: 10px;">
						<label> Dang uong: </label>
						<input type="checkbox"  id="danguong" onChange="loadTableList()" />
						<label> Da Tinh tien: </label>
						<input type="checkbox"  id="datinhtien" onChange = "loadTableList()"/>						
					</div>
					
			<label style="margin-left: 10px;" class="col-xs6 col-sm-2">chon ngay xem:</label>
			<div style="margin: 10px;" id='jqxDateTimeInput'></div>
			
			
		  </div>


<div id="treemap"></div>

          
        </div>
      </div>
    </div>



		</div>
		<!-- /container -->


	</div>


	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<!-- Jquery -->
	<script src="/resources/scripts/jquery/jquery-1.10.2.js"
		type="text/javascript">
		<jsp:text/>
	</script>

	<script src="/resources/bootstrap/js/bootstrap.min.js"
		type="text/javascript">
		<jsp:text/>
	</script>
	<script src="/resources/bootstrap/js/docs.min.js"
		type="text/javascript">
		<jsp:text/>
	</script>	
	<!--JqueryGrid -->
	<link rel="stylesheet" href="/resources/jqwidgets/styles/jqx.base.css"
		type="text/css" />

	<script type="text/javascript" src="/resources/jqwidgets/jqxcore.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxdata.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxbuttons.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxscrollbar.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxmenu.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxgrid.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxgrid.edit.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxgrid.selection.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxgrid.aggregates.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxcheckbox.js">
		<jsp:text/>
	</script>
	<script type="text/javascript"
		src="/resources/jqwidgets/jqxnumberinput.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxinput.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxcalendar.js">
		<jsp:text/>
	</script>	
	<script type="text/javascript" src="/resources/jqwidgets/jqxdatetimeinput.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/jqwidgets/jqxtreemap.js">
		<jsp:text/>
	</script>	
	<script type="text/javascript" src="/resources/jqwidgets/jqxtooltip.js">
		<jsp:text/>
	</script>
	
	<script type="text/javascript" src="/resources/scripts/demos.js">
		<jsp:text/>
	</script>
	<script type="text/javascript" src="/resources/QLbanle.js">
		<jsp:text/>
	</script>
	<script type="text/javascript">
            var data = [
            {
                label: 'Khu A',
                value: null,
                color: '#B3FAFF',
				tableid: null
            },
            {
                label: 'Khu B',
                value: null,
                color: '#95FF7A',
				tableid: null
            },
            {
                label: 'Khu C',
                value: null,
                color: '#FFA3CE',
				tableid: null
            },
            {
                label: 'Khu D',
                value: null,
                color: '#F1A3FF',
				tableid: null
            },
            {
                label: 'Ban 1',
                value: 2,
                parent: 'Khu A',
                data: { description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.", title: "The Shawshank Redemption (1994)" },
				tableid: 'b1'
            },
            {
                label: 'Ban 2',
                value: 2,
                parent: 'Khu A',
                data: { description: "As students at the Navy's elite fighter weapons school compete to be best in the class, one daring young flyer learns a few things from a civilian instructor that are not taught in the classroom.", title: "Top Gun (1986)" },
				tableid: 'b2'
            },
            {
                label: 'Ban 3',
                value: 2,
                parent: 'Khu A',
                data: { description: "A Naval veteran arrives home from war unsettled and uncertain of his future - until he is tantalized by The Cause and its charismatic leader.", title: "The Master (2012)" },
				tableid: 'b3'
            },
            {
                label: 'Ban 4',
                value: 2,
                parent: 'Khu A',
                data: { description: "A Khu Atization of the 1980 joint CIA-Canadian secret operation to extract six fugitive American diplomatic personnel out of revolutionary Iran.", title: "Argo (2012)" },
				tableid: 'b4'
            },
            {
                label: 'Ban 5',
                value: 2,
                parent: 'Khu B',
                data: { description: "An insomniac office worker looking for a way to change his life crosses paths with a devil-may-care soap maker and they form an underground fight club that evolves into something much, much more.", title: "Fight Club (1999)" },
				tableid: 'b5'
            },
            {
                label: 'Ban 6',
                value: 2,
                parent: 'Khu B',
                data: { description: "The aging patriarch of an organized Khu B dynasty transfers control of his clandestine empire to his reluctant son.", title: "The Godfather (1972)" },
				tableid: 'b6'
            },
            {
                label: 'Ban 7',
                value: 2,
                parent: 'Khu C',
                data: { description: "When Batman, Gordon and Harvey Dent launch an assault on the mob, they let the clown out of the box, the Joker, bent on turning Gotham on itself and bringing any heroes down to his level.", title: "The Dark Knight (2008)" },
				tableid: 'b7'
            },
            {
                label: 'Ban 8',
                value: 2,
                parent: 'Khu B',
                data: { description: "The lives of two mob hit men, a boxer, a gangster's wife, and a pair of diner bandits intertwine in four tales of violence and redemption.", title: "Pulp Fiction (1994)" },
				tableid: 'b8'
            },
            {
                label: 'Ban 9',
                value: 2,
                parent: 'Khu A',
                data: { description: "Forrest Gump, while not intelligent, has accidentally been present at many historic moments, but his true love, Jenny Curran, eludes him.", title: "Forrest Gump (1994)" },
				tableid: 'b9'
            },
            {
                label: 'Ban 10',
                value: 2,
                parent: 'Khu C',
                data: { description: "A computer hacker learns from mysterious rebels about the true nature of his reality and his role in the war against its controllers.", title: "The Matrix (1999)" },
				tableid: 'b10'
            },
            {
                label: 'Ban 11',
                value: 2,
                parent: 'Khu A',
                data: { description: "Twelve men must decide the fate of one when one juror objects to the jury's decision.", title: "12 Angry Men (TV 1997)" },
				tableid: 'b11'
            },
            {
                label: 'Ban 12',
                value: 2,
                parent: 'Khu C',
                data: { description: "Luke Skywalker, a spirited farm boy, joins rebel forces to save Princess Leia from the evil Darth Vader, and the galaxy from the Empire's planet-destroying Death Star..", title: "Star Wars: Episode IV - A New Hope (1977)" },
				tableid: 'b12'
            },
            {
                label: 'Ban 13',
                value: 2,
                parent: 'Khu C',
                data: { description: "A skilled extractor is offered a chance to regain his old life as payment for a task considered to be impossible.", title: "Inception (2010)" },
				tableid: 'b13'
            },
            {
                label: 'Ban 14',
                value: 2,
                parent: 'Khu B',
                data: { description: "Unscrupulous boxing promoters, violent bookmakers, a Russian gangster, incompetent amateur robbers, and supposedly Jewish jewelers fight to track down a priceless stolen diamond.", title: "Snatch (2000)" },
				tableid: 'b14'
            },
            {
                label: 'Ban 15',
                value: 2,
                parent: 'Khu D',
                data: { description: "A cowboy doll is profoundly threatened and jealous when a new spaceman figure supplants him as top toy in a boy's room.", title: "Toy Story(2005)" },
				tableid: 'b15'
            },
            {
                label: 'Ban 16',
                value: 2,
                parent: 'Khu B',
                data: { description: "Bond's loyalty to M is tested when her past comes back to haunt her. Whilst MI6 comes under attack, 007 must track down and destroy the threat, no matter how personal the cost.", title: "Skyfall (2012)" },
				tableid: 'b16'
            },
            {
                label: 'Ban 17',
                value: 2,
                parent: 'Khu B',
                data: { description: "A thief with a unique code of professional ethics is double-crossed by his crew and left for dead. Assuming a new disguise and forming an unlikely alliance with a woman on the inside, he looks to hijack the score of the crew's latest heist.", title: "Parker (1994)" },
				tableid: 'b17'
            },
            {
                label: 'Ban 18',
                value: 2,
                parent: 'Khu C',
                data: { description: "An extraterrestrial race forced to live in slum-like conditions on Earth suddenly finds a kindred spirit in a government agent who is exposed to their biotechnology.", title: "District 9 (2009)" },
				tableid: 'b18'
            },
            {
                label: 'Ban 19',
                value: 2,
                parent: 'Khu D',
                data: { description: "When two escaping American World War II prisoners are killed, the German POW camp barracks black marketeer, J.J. Sefton, is suspected of being an informer.", title: "Stalag 17 (1953)"},
				tableid: 'b19'
            }
            ];
			
            $('#treemap').jqxTreeMap({
                width: 1200,
                height: 300,
                source: data,
                colorRange: 50,
                renderCallbacks: {
                    '*': function (element, value) {
                        if (value.data) {
							<c:forEach var="table" items ="${table}">
								//console.log("${table.tableNumber}" + value.label);
								alert("${table.status}");
								if("${table.status}" == 'DRINKING'){
									if("${table.tableNumber}" == value.label){
										element.css({
											border: '3px solid red'
										});
										}
								}
								else if("${table.status}" == 'PAID'){
									if("${table.tableNumber}" == value.label){
										element.css({
											border: '3px solid green'
										});
										}								
								}		
							</c:forEach>							
						
						
                   /*         element.jqxTooltip({
                                content: '<div><div style="font-weight: bold; max-width: 200px; font-family: verdana; font-size: 13px;">' + value.data.title + '</div><div style="width: 200px; font-family: verdana; font-size: 12px;">' + value.data.description + '</div></div>',
                                position: 'mouse',
                                autoHideDelay: 6000,
                                theme: theme
                            });
					*/
						element.click(function(){
								
								window.location = 'quanlyban/' + value.label + '?tablenumber';
								});
                        } else if (value.data === undefined) {
                            element.css({
                                backgroundColor: '#fff',
                                border: '1px solid #555'
                            });
                        }
                    }
                }
            });
			
	
	
		 $("#jqxDateTimeInput").jqxDateTimeInput({
			 width: '200px',
			 height: '25px',
			 theme: 'energyblue'
		 });
            $('#jqxDateTimeInput').on('valuechanged', function (event) {
                var date = event.args.date;
				var date2 = $("#jqxDateTimeInput").val();
				loadTableList(date2);
            });

	function loadTableList(tradeDate){
		if (!tradeDate){
			tradeDate = $("#jqxDateTimeInput").val();
		}
		var danguong = document.getElementById('danguong').checked;
		var datinhtien = document.getElementById('datinhtien').checked;
		
		var url = '/';
		var inputData = {tradeDate:  tradeDate, danguong: danguong, datinhtien: datinhtien};
		 $.ajax({
		   url: url,
		   data: inputData,
		   dataType : "html",
		   type: 'GET',
		//   data: data,
		   success: function(data){
			 //On ajax success do this
			 var a = 1;
         //   var gotcha = parseHTML(data,'maindiv');
            $('#maindiv').html($(data).find('#maindiv').html());
			$.getScript('/resources/bootstrap/js/vendor/holder.js', function(){});
			  },
		   error: function(xhr, ajaxOptions, thrownError) {
			  //On error do this
				alert(xhr.status);
				alert(thrownError);

			}
		 });		
		
	};

	function updateTreeMap(){
		<c:forEach var="table" items ="${table}">
			
			
		
			
		   
		</c:forEach>	
	
	};
	</script>

</body>

</html>